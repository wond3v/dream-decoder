"""
Dream Symbol Database â€” å‘¨å…¬è§£æ¢¦ + Modern Interpretations
"""

SYMBOLS = {
    # === åŠ¨ç‰© Animals ===
    "è›‡": {
        "en": "snake",
        "category": "åŠ¨ç‰©",
        "traditional": "è›‡ä¸ºå°é¾™ï¼Œæ¢¦è›‡å¤šä¸»è´¢è¿ã€æ™ºæ…§ã€‚è¢«è›‡å’¬åˆ™å¯èƒ½æœ‰å°äººã€‚",
        "modern": "May represent hidden fears, transformation, or temptation.",
        "fortune": "å‰å‡¶å‚åŠ",
        "keywords": ["snake", "serpent", "è›‡"]
    },
    "ç‹—": {
        "en": "dog",
        "category": "åŠ¨ç‰©",
        "traditional": "ç‹—ä¸ºå¿ è¯šä¹‹å…½ï¼Œæ¢¦ç‹—ä¸»æœ‹å‹ã€å¿ è¯šã€‚ç‹—å’¬äººåˆ™å¯èƒ½æœ‰å£èˆŒä¹‹äº‰ã€‚",
        "modern": "Represents loyalty, friendship, or protection instincts.",
        "fortune": "å‰",
        "keywords": ["dog", "puppy", "ç‹—", "çŠ¬"]
    },
    "é¾™": {
        "en": "dragon",
        "category": "åŠ¨ç‰©",
        "traditional": "é¾™ä¸ºå¸çŽ‹ä¹‹è±¡ï¼Œå¤§å‰ï¼ä¸»äº‹ä¸šè…¾é£žã€è´µäººç›¸åŠ©ã€‚",
        "modern": "Symbol of power, success, and ambition.",
        "fortune": "å¤§å‰",
        "keywords": ["dragon", "é¾™"]
    },
    "çŒ«": {
        "en": "cat",
        "category": "åŠ¨ç‰©",
        "traditional": "çŒ«ä¸»ç‹¬ç«‹ã€ç¥žç§˜ã€‚æ¢¦çŒ«å¯èƒ½æœ‰å¥³æ€§è´µäººï¼Œæˆ–éœ€é˜²å°äººã€‚",
        "modern": "Independence, intuition, feminine energy.",
        "fortune": "ä¸­",
        "keywords": ["cat", "kitten", "çŒ«"]
    },
    "é±¼": {
        "en": "fish",
        "category": "åŠ¨ç‰©",
        "traditional": "é±¼é€š'ä½™'ï¼Œå¹´å¹´æœ‰ä½™ï¼æ¢¦é±¼ä¸»è´¢è¿ã€å¯Œè¶³ã€‚",
        "modern": "Abundance, fertility, the unconscious mind.",
        "fortune": "å‰",
        "keywords": ["fish", "é±¼"]
    },
    "é¸Ÿ": {
        "en": "bird",
        "category": "åŠ¨ç‰©",
        "traditional": "é¸Ÿä¸»è‡ªç”±ã€æ¶ˆæ¯ã€‚æ¢¦é¸Ÿé£žä¸»å¥½æ¶ˆæ¯å°†è‡³ã€‚",
        "modern": "Freedom, perspective, messages from the subconscious.",
        "fortune": "å‰",
        "keywords": ["bird", "é¸Ÿ"]
    },

    # === è‡ªç„¶ Nature ===
    "æ°´": {
        "en": "water",
        "category": "è‡ªç„¶",
        "traditional": "æ°´ä¸»è´¢ã€‚æ¸…æ°´ä¸ºè´¢è¿ï¼Œæµ‘æ°´éœ€è°¨æ…Žã€‚å¤§æ°´/æ´ªæ°´ä¸»å¤§å˜åŠ¨ã€‚",
        "modern": "Emotions, the unconscious, cleansing or overwhelm.",
        "fortune": "è§†æƒ…å†µ",
        "keywords": ["water", "river", "ocean", "æ°´", "æ²³", "æµ·"]
    },
    "ç«": {
        "en": "fire",
        "category": "è‡ªç„¶",
        "traditional": "ç«ä¸»å…´æ—ºã€‚æ¢¦ç«çƒ§ä¸»äº‹ä¸šçº¢ç«ï¼Œä½†éœ€é˜²å†²åŠ¨ã€‚",
        "modern": "Passion, transformation, anger, or creativity.",
        "fortune": "å‰å‡¶å‚åŠ",
        "keywords": ["fire", "flame", "ç«", "ç„°"]
    },
    "å±±": {
        "en": "mountain",
        "category": "è‡ªç„¶",
        "traditional": "å±±ä¸»ç¨³é‡ã€éšœç¢ã€‚çˆ¬å±±æˆåŠŸä¸»å…‹æœå›°éš¾ã€‚",
        "modern": "Challenges, goals, stability, obstacles to overcome.",
        "fortune": "ä¸­",
        "keywords": ["mountain", "hill", "å±±"]
    },
    "é›¨": {
        "en": "rain",
        "category": "è‡ªç„¶",
        "traditional": "é›¨ä¸»æ©æ³½ã€æ¶¦æ³½ã€‚æ¢¦é›¨å¤šä¸ºå‰å…†ï¼Œæ»‹æ¶¦ä¸‡ç‰©ã€‚",
        "modern": "Cleansing, renewal, sadness, or fertility.",
        "fortune": "å‰",
        "keywords": ["rain", "é›¨"]
    },
    "é›ª": {
        "en": "snow",
        "category": "è‡ªç„¶",
        "traditional": "é›ªä¸»çº¯æ´ã€ç‘žé›ªå…†ä¸°å¹´ã€‚ä½†ä¹Ÿå¯èƒ½æš—ç¤ºå†·æ·¡ã€‚",
        "modern": "Purity, isolation, emotional coldness, or fresh start.",
        "fortune": "å‰",
        "keywords": ["snow", "é›ª"]
    },

    # === äººç‰© People ===
    "æ­»äºº": {
        "en": "dead person",
        "category": "äººç‰©",
        "traditional": "æ¢¦è§æ­»äººåä¸ºå‰ï¼ä¸»é•¿å¯¿ã€æ—§äº‹äº†ç»“ã€‚æ­»åŽ»çš„äº²äººæ‰˜æ¢¦è¦æ³¨æ„ã€‚",
        "modern": "Endings, transformation, unresolved feelings about the person.",
        "fortune": "å‰",
        "keywords": ["dead", "death", "deceased", "æ­»", "äº¡"]
    },
    "å©´å„¿": {
        "en": "baby",
        "category": "äººç‰©",
        "traditional": "å©´å„¿ä¸»æ–°ç”Ÿã€å¸Œæœ›ã€‚æ¢¦å©´å„¿ä¸»æ–°å¼€å§‹æˆ–å¥½æ¶ˆæ¯ã€‚",
        "modern": "New beginnings, innocence, vulnerability, new projects.",
        "fortune": "å‰",
        "keywords": ["baby", "infant", "å©´å„¿", "å®å®"]
    },
    "é™Œç”Ÿäºº": {
        "en": "stranger",
        "category": "äººç‰©",
        "traditional": "é™Œç”Ÿäººå¯èƒ½ä»£è¡¨è‡ªå·±æœªçŸ¥çš„ä¸€é¢ï¼Œæˆ–å³å°†é‡åˆ°çš„è´µäºº/å°äººã€‚",
        "modern": "Unknown aspects of yourself, new opportunities or threats.",
        "fortune": "ä¸­",
        "keywords": ["stranger", "unknown person", "é™Œç”Ÿäºº"]
    },

    # === ç‰©å“ Objects ===
    "æ£ºæ": {
        "en": "coffin",
        "category": "ç‰©å“",
        "traditional": "å¤§å‰ï¼æ£ºæ = å®˜è´¢ï¼ˆå‡å®˜å‘è´¢ï¼‰ã€‚æ£ºæå…¥å®…ä¸»è´¢è¿è¿›é—¨ã€‚",
        "modern": "Endings leading to new beginnings, transformation.",
        "fortune": "å¤§å‰",
        "keywords": ["coffin", "æ£ºæ", "æ£º"]
    },
    "é’±": {
        "en": "money",
        "category": "ç‰©å“",
        "traditional": "æ¢¦é’±ä¸ä¸€å®šä¸»è´¢ã€‚æ¡é’±å¯èƒ½æ¼è´¢ï¼Œä¸¢é’±åè€Œå¯èƒ½å¾—è´¢ã€‚",
        "modern": "Self-worth, power, anxiety about resources.",
        "fortune": "è§†æƒ…å†µ",
        "keywords": ["money", "cash", "é’±", "é‡‘é’±"]
    },
    "é•œå­": {
        "en": "mirror",
        "category": "ç‰©å“",
        "traditional": "é•œå­ä¸»è‡ªçœã€çœŸç›¸ã€‚ç ´é•œåˆ™éœ€é˜²å£èˆŒæˆ–åˆ†ç¦»ã€‚",
        "modern": "Self-reflection, truth, vanity, or self-image issues.",
        "fortune": "ä¸­",
        "keywords": ["mirror", "é•œå­", "é•œ"]
    },
    "è½¦": {
        "en": "car",
        "category": "ç‰©å“",
        "traditional": "è½¦ä¸»å‰è¿›ã€äº‹ä¸šã€‚å¼€è½¦é¡ºåˆ©ä¸»äº‹ä¸šé¡ºé‚ã€‚",
        "modern": "Life direction, control, ambition, journey.",
        "fortune": "å‰",
        "keywords": ["car", "vehicle", "è½¦"]
    },
    "æˆ¿å­": {
        "en": "house",
        "category": "ç‰©å“",
        "traditional": "æˆ¿å­ä¸»è‡ªèº«ã€‚æ–°æˆ¿ä¸»æ–°ç”Ÿæ´»ï¼Œæ—§æˆ¿ä¸»æ€€æ—§æˆ–éœ€æ”¹å˜ã€‚",
        "modern": "The self, security, family, different rooms = different aspects of psyche.",
        "fortune": "ä¸­",
        "keywords": ["house", "home", "æˆ¿å­", "æˆ¿", "å±‹"]
    },

    # === åŠ¨ä½œ Actions ===
    "é£ž": {
        "en": "flying",
        "category": "åŠ¨ä½œ",
        "traditional": "é£žä¸»é«˜å‡ã€è‡ªç”±ã€‚é£žå¾—é«˜ä¸»å¿—å‘è¿œå¤§ï¼Œä½†éœ€é˜²éª„å‚²ã€‚",
        "modern": "Freedom, escape, ambition, transcending limitations.",
        "fortune": "å‰",
        "keywords": ["fly", "flying", "é£ž", "é£žç¿”"]
    },
    "æŽ‰ç‰™": {
        "en": "losing teeth",
        "category": "åŠ¨ä½œ",
        "traditional": "ä¼ ç»Ÿè®¤ä¸ºæŽ‰ç‰™ä¸»äº²äººå¥åº·éœ€æ³¨æ„ã€‚ä½†ä¹Ÿå¯èƒ½ä¸»èœ•å˜ã€‚",
        "modern": "Anxiety about appearance, aging, loss of control, major life changes.",
        "fortune": "éœ€æ³¨æ„",
        "keywords": ["teeth", "losing teeth", "tooth", "æŽ‰ç‰™", "ç‰™"]
    },
    "è·‘": {
        "en": "running",
        "category": "åŠ¨ä½œ",
        "traditional": "è·‘ä¸»è¿½æ±‚æˆ–é€ƒé¿ã€‚è¿½äººä¸»æœ‰æ‰€æ±‚ï¼Œè¢«è¿½ä¸»æœ‰åŽ‹åŠ›ã€‚",
        "modern": "Pursuit of goals, escaping problems, anxiety.",
        "fortune": "ä¸­",
        "keywords": ["run", "running", "chase", "è·‘", "è¿½"]
    },
    "å“­": {
        "en": "crying",
        "category": "åŠ¨ä½œ",
        "traditional": "æ¢¦å“­åä¸»å–œï¼å“­å¾—è¶ŠåŽ‰å®³ï¼Œå–œäº‹è¶Šå¤§ã€‚",
        "modern": "Emotional release, sadness, or joy in disguise.",
        "fortune": "å‰",
        "keywords": ["cry", "crying", "tears", "å“­", "æ³ª"]
    },
    "è€ƒè¯•": {
        "en": "exam",
        "category": "åŠ¨ä½œ",
        "traditional": "è€ƒè¯•ä¸»è¢«è¯„åˆ¤ã€åŽ‹åŠ›ã€‚è€ƒå¾—å¥½ä¸»é¡ºåˆ©ï¼Œè€ƒç ¸éœ€è‡ªçœã€‚",
        "modern": "Fear of judgment, self-evaluation, imposter syndrome.",
        "fortune": "ä¸­",
        "keywords": ["exam", "test", "è€ƒè¯•", "æµ‹è¯•"]
    },
    "ç»“å©š": {
        "en": "wedding",
        "category": "åŠ¨ä½œ",
        "traditional": "æ¢¦ç»“å©šä¸»äººç”Ÿæ–°é˜¶æ®µã€æ‰¿è¯ºã€‚æœªå©šè€…æ¢¦æ­¤å¯èƒ½æœ‰å§»ç¼˜ã€‚",
        "modern": "Commitment, union of different aspects of self, new phase.",
        "fortune": "å‰",
        "keywords": ["wedding", "marriage", "marry", "ç»“å©š", "å©šç¤¼"]
    },
    "æ€€å­•": {
        "en": "pregnancy",
        "category": "åŠ¨ä½œ",
        "traditional": "æ€€å­•ä¸»æ–°ç”Ÿã€åˆ›é€ ã€‚å¯èƒ½æœ‰æ–°è®¡åˆ’æˆ–åˆ›æ„ã€‚",
        "modern": "Creativity, new ideas, development, anticipation.",
        "fortune": "å‰",
        "keywords": ["pregnant", "pregnancy", "æ€€å­•"]
    },
}

# Fortune ratings explanation
FORTUNE_LEVELS = {
    "å¤§å‰": ("ðŸŒŸðŸŒŸðŸŒŸ", "Extremely auspicious! Great fortune ahead."),
    "å‰": ("ðŸŒŸðŸŒŸ", "Auspicious. Good things coming."),
    "ä¸­": ("ðŸŒŸ", "Neutral. Depends on context."),
    "éœ€æ³¨æ„": ("âš ï¸", "Needs attention. Be cautious."),
    "å‰å‡¶å‚åŠ": ("ðŸŒ“", "Mixed fortune. Both good and bad aspects."),
    "è§†æƒ…å†µ": ("ðŸ”®", "Depends on dream details."),
}

def search_symbol(query: str) -> list:
    """Search for symbols matching the query."""
    query = query.lower().strip()
    results = []
    
    for key, data in SYMBOLS.items():
        # Check if query matches any keyword
        keywords = [k.lower() for k in data.get("keywords", [])]
        if query in keywords or query == key.lower() or query == data.get("en", "").lower():
            results.append((key, data))
    
    # Fuzzy match if no exact results
    if not results:
        for key, data in SYMBOLS.items():
            keywords = " ".join(data.get("keywords", [])).lower()
            if query in keywords or query in key.lower() or query in data.get("en", "").lower():
                results.append((key, data))
    
    return results
